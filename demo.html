<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mouse Rover - ‰∫íÂãïÂºèÊºîÁ§∫</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        header h1 {
            font-size: 3em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            padding: 40px;
        }

        .left-panel {
            display: flex;
            flex-direction: column;
            gap: 30px;
        }

        .card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.07);
        }

        .card h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.5em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .control-group {
            margin-bottom: 25px;
        }

        .control-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }

        .control-group input[type="range"] {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #ddd;
            outline: none;
            -webkit-appearance: none;
        }

        .control-group input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .control-group input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .value-display {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-weight: 600;
            margin-left: 10px;
        }

        .toggle-switch {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-top: 10px;
        }

        .switch {
            position: relative;
            display: inline-block;
            width: 60px;
            height: 34px;
        }

        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }

        .slider:before {
            position: absolute;
            content: "";
            height: 26px;
            width: 26px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .slider {
            background-color: #667eea;
        }

        input:checked + .slider:before {
            transform: translateX(26px);
        }

        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        button {
            flex: 1;
            padding: 15px 30px;
            border: none;
            border-radius: 10px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: #e9ecef;
            color: #495057;
        }

        .btn-secondary:hover {
            background: #dee2e6;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .btn-danger:hover {
            background: #c82333;
        }

        .canvas-container {
            position: relative;
            background: #ffffff;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.07);
            overflow: hidden;
        }

        #demoCanvas {
            display: block;
            width: 100%;
            height: 500px;
            border: 3px solid #667eea;
            border-radius: 15px;
            cursor: crosshair;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .stat-card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid #e9ecef;
        }

        .stat-value {
            font-size: 2em;
            font-weight: 700;
            color: #667eea;
            display: block;
        }

        .stat-label {
            color: #6c757d;
            font-size: 0.9em;
            margin-top: 5px;
        }

        .info-box {
            background: #e7f3ff;
            border-left: 4px solid #667eea;
            padding: 15px;
            border-radius: 5px;
            margin-top: 15px;
        }

        .info-box strong {
            color: #667eea;
        }

        .log-container {
            background: #1e1e1e;
            color: #d4d4d4;
            border-radius: 10px;
            padding: 20px;
            max-height: 250px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }

        .log-entry {
            margin-bottom: 8px;
            line-height: 1.5;
        }

        .log-entry .timestamp {
            color: #4ec9b0;
        }

        .log-entry .mouse {
            color: #ce9178;
        }

        .log-entry .position {
            color: #dcdcaa;
        }

        .emoji {
            font-size: 1.2em;
        }

        .hot-corner {
            position: absolute;
            background: rgba(220, 53, 69, 0.2);
            border: 2px dashed #dc3545;
            pointer-events: none;
        }

        @media (max-width: 1024px) {
            .content {
                grid-template-columns: 1fr;
            }
        }

        .mode-indicator {
            display: inline-block;
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.85em;
            font-weight: 600;
            margin-left: 10px;
        }

        .mode-active {
            background: #28a745;
            color: white;
        }

        .mode-inactive {
            background: #6c757d;
            color: white;
        }

        .command-box {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            margin-top: 15px;
            position: relative;
        }

        .command-box code {
            color: #a6e22e;
        }

        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 5px 10px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.8em;
        }

        .copy-btn:hover {
            background: #5568d3;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üêÅ Mouse Rover</h1>
            <p>‰∫íÂãïÂºèÊºîÁ§∫ - ÁêÜËß£ÊªëÈº†Ëá™ÂãïÁßªÂãïÁöÑÂ∑•‰ΩúÂéüÁêÜ</p>
        </header>

        <div class="content">
            <div class="left-panel">
                <!-- ÊéßÂà∂Èù¢Êùø -->
                <div class="card">
                    <h2>‚öôÔ∏è ÊéßÂà∂Èù¢Êùø</h2>

                    <div class="control-group">
                        <label>
                            Ëß∏ÁôºÈñìÈöî (Áßí)
                            <span class="value-display" id="timeValue">10</span>
                        </label>
                        <input type="range" id="timeSlider" min="1" max="30" value="10">
                        <div class="info-box">
                            <strong>Ë™™ÊòéÔºö</strong>Á®ãÂºèÊØèÈöîÈÄôÊÆµÊôÇÈñìÊ™¢Êü•‰∏ÄÊ¨°ÊªëÈº†‰ΩçÁΩÆ
                        </div>
                    </div>

                    <div class="control-group">
                        <label>ÁßªÂãïÊ®°Âºè</label>
                        <div class="toggle-switch">
                            <span>Â§ßÁØÑÂúçÁßªÂãï</span>
                            <label class="switch">
                                <input type="checkbox" id="smallToggle">
                                <span class="slider"></span>
                            </label>
                            <span>Â∞èÁØÑÂúçÁßªÂãï</span>
                        </div>
                        <div class="info-box">
                            <strong>Â∞èÁØÑÂúçÔºö</strong>Âú®Áï∂Ââç‰ΩçÁΩÆÈôÑËøëÁßªÂãï ¬±10 ÂÉèÁ¥†<br>
                            <strong>Â§ßÁØÑÂúçÔºö</strong>Âú®Êï¥ÂÄãËû¢ÂπïÁØÑÂúçÂÖßÈö®Ê©üÁßªÂãï
                        </div>
                    </div>

                    <div class="control-group">
                        <label>Âü∑Ë°åÊ®°Âºè</label>
                        <div class="toggle-switch">
                            <span>ÂñÆÊ¨°Âü∑Ë°å</span>
                            <label class="switch">
                                <input type="checkbox" id="alwaysToggle" checked>
                                <span class="slider"></span>
                            </label>
                            <span>ÊåÅÁ∫åÂü∑Ë°å</span>
                        </div>
                        <div class="info-box">
                            <strong>ÂñÆÊ¨°Ôºö</strong>ÂÅµÊ∏¨Âà∞‰ΩøÁî®ËÄÖÁßªÂãïÊªëÈº†ÂæåËá™ÂãïÂÅúÊ≠¢<br>
                            <strong>ÊåÅÁ∫åÔºö</strong>ÊåÅÁ∫åÈÅãË°åÔºåÂç≥‰Ωø‰ΩøÁî®ËÄÖÁßªÂãïÊªëÈº†
                        </div>
                    </div>

                    <div class="button-group">
                        <button class="btn-primary" id="startBtn">‚ñ∂Ô∏è ÈñãÂßãÊºîÁ§∫</button>
                        <button class="btn-danger" id="stopBtn">‚èπÔ∏è ÂÅúÊ≠¢ÊºîÁ§∫</button>
                        <button class="btn-secondary" id="resetBtn">üîÑ ÈáçÁΩÆ</button>
                    </div>

                    <div class="command-box">
                        <code id="commandDisplay">$ python mouse-rover.py -t10 -a</code>
                        <button class="copy-btn" onclick="copyCommand()">Ë§áË£Ω</button>
                    </div>
                </div>

                <!-- Áµ±Ë®àË≥áË®ä -->
                <div class="card">
                    <h2>üìä Áµ±Ë®àË≥áË®ä</h2>
                    <div class="stats">
                        <div class="stat-card">
                            <span class="stat-value" id="moveCount">0</span>
                            <span class="stat-label">ÁßªÂãïÊ¨°Êï∏</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-value" id="statusDisplay">ÂÅúÊ≠¢</span>
                            <span class="stat-label">Áï∂ÂâçÁãÄÊÖã</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-value" id="positionX">0</span>
                            <span class="stat-label">X Â∫ßÊ®ô</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-value" id="positionY">0</span>
                            <span class="stat-label">Y Â∫ßÊ®ô</span>
                        </div>
                    </div>
                </div>

                <!-- Ê¥ªÂãïÊó•Ë™å -->
                <div class="card">
                    <h2>üìù Ê¥ªÂãïÊó•Ë™å</h2>
                    <div class="log-container" id="logContainer">
                        <div class="log-entry">
                            <span class="timestamp">[Á≥ªÁµ±]</span> Ê∫ñÂÇôÂ∞±Á∑íÔºåÈªûÊìä„ÄåÈñãÂßãÊºîÁ§∫„ÄçÈñãÂßã
                        </div>
                    </div>
                </div>
            </div>

            <!-- Ë¶ñË¶∫ÂåñÁï´Â∏É -->
            <div>
                <div class="card">
                    <h2>üñ•Ô∏è Ë¶ñË¶∫ÂåñÁï´Â∏É</h2>
                    <div class="canvas-container">
                        <canvas id="demoCanvas"></canvas>
                    </div>
                    <div class="info-box" style="margin-top: 15px;">
                        <strong>‰∫íÂãïË™™ÊòéÔºö</strong><br>
                        ‚Ä¢ ÈªûÊìäÁï´Â∏É‰ªªÊÑè‰ΩçÁΩÆ‰æÜÊ®°Êì¨„Äå‰ΩøÁî®ËÄÖÁßªÂãïÊªëÈº†„Äç<br>
                        ‚Ä¢ Á¥ÖËâ≤ËôõÁ∑öÂçÄÂüüÁÇ∫„ÄåHot Corner„ÄçÈÇäÁïåÔºàÈÅøÂÖçËß∏ÁôºÁ≥ªÁµ±ÂäüËÉΩÔºâ<br>
                        ‚Ä¢ Á∂†Ëâ≤ÂúìÂúà‰ª£Ë°®Á®ãÂºèËá™ÂãïÁßªÂãïÁöÑ‰ΩçÁΩÆ<br>
                        ‚Ä¢ ËóçËâ≤ÂúìÂúà‰ª£Ë°®‰ΩøÁî®ËÄÖÊâãÂãïÁßªÂãïÁöÑ‰ΩçÁΩÆ
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Canvas Ë®≠ÁΩÆ
        const canvas = document.getElementById('demoCanvas');
        const ctx = canvas.getContext('2d');
        const BORDER_SIZE = 10;
        let canvasWidth, canvasHeight;

        function resizeCanvas() {
            const container = canvas.parentElement;
            canvasWidth = container.clientWidth - 6;
            canvasHeight = 500;
            canvas.width = canvasWidth;
            canvas.height = canvasHeight;
            drawHotCorners();
        }

        resizeCanvas();
        window.addEventListener('resize', resizeCanvas);

        // Áπ™Ë£Ω Hot Corner ÂçÄÂüü
        function drawHotCorners() {
            ctx.clearRect(0, 0, canvasWidth, canvasHeight);
            ctx.strokeStyle = '#dc3545';
            ctx.lineWidth = 2;
            ctx.setLineDash([5, 5]);
            ctx.strokeRect(0, 0, BORDER_SIZE, canvasHeight);
            ctx.strokeRect(canvasWidth - BORDER_SIZE, 0, BORDER_SIZE, canvasHeight);
            ctx.strokeRect(0, 0, canvasWidth, BORDER_SIZE);
            ctx.strokeRect(0, canvasHeight - BORDER_SIZE, canvasWidth, BORDER_SIZE);
            ctx.setLineDash([]);
        }

        // ÁãÄÊÖãËÆäÊï∏
        let isRunning = false;
        let moveCount = 0;
        let currentX = canvasWidth / 2;
        let currentY = canvasHeight / 2;
        let previousX = currentX;
        let previousY = currentY;
        let intervalId = null;
        let userMoved = false;

        // ÊéßÂà∂È†Ö
        const timeSlider = document.getElementById('timeSlider');
        const timeValue = document.getElementById('timeValue');
        const smallToggle = document.getElementById('smallToggle');
        const alwaysToggle = document.getElementById('alwaysToggle');
        const startBtn = document.getElementById('startBtn');
        const stopBtn = document.getElementById('stopBtn');
        const resetBtn = document.getElementById('resetBtn');
        const commandDisplay = document.getElementById('commandDisplay');

        // Êõ¥Êñ∞ÂëΩ‰ª§È°ØÁ§∫
        function updateCommand() {
            const time = timeSlider.value;
            const small = smallToggle.checked ? ' -s' : '';
            const always = alwaysToggle.checked ? ' -a' : '';
            commandDisplay.textContent = `$ python mouse-rover.py -t${time}${always}${small}`;
        }

        timeSlider.addEventListener('input', (e) => {
            timeValue.textContent = e.target.value;
            updateCommand();
        });

        smallToggle.addEventListener('change', updateCommand);
        alwaysToggle.addEventListener('change', updateCommand);

        // Êó•Ë™åÂäüËÉΩ
        function addLog(message, type = 'info') {
            const logContainer = document.getElementById('logContainer');
            const timestamp = new Date().toLocaleTimeString('zh-TW');
            const entry = document.createElement('div');
            entry.className = 'log-entry';
            entry.innerHTML = `<span class="timestamp">[${timestamp}]</span> ${message}`;
            logContainer.appendChild(entry);
            logContainer.scrollTop = logContainer.scrollHeight;
        }

        // Áπ™Ë£ΩÊªëÈº†‰ΩçÁΩÆ
        function drawMouse(x, y, color = '#28a745', label = 'Ëá™Âãï') {
            ctx.beginPath();
            ctx.arc(x, y, 8, 0, 2 * Math.PI);
            ctx.fillStyle = color;
            ctx.fill();
            ctx.strokeStyle = 'white';
            ctx.lineWidth = 2;
            ctx.stroke();

            // Áπ™Ë£ΩÊ®ôÁ±§
            ctx.fillStyle = color;
            ctx.font = 'bold 12px sans-serif';
            ctx.fillText(label, x + 12, y - 8);
        }

        // Ê™¢Êü•ÊòØÂê¶Âú® Hot Corner
        function isInHotCorner(x, y) {
            return x < BORDER_SIZE || x > canvasWidth - BORDER_SIZE ||
                   y < BORDER_SIZE || y > canvasHeight - BORDER_SIZE;
        }

        // ÁßªÂãïÂà∞‰∏ã‰∏ÄÂÄã‰ΩçÁΩÆ
        function moveToNextLocation() {
            previousX = currentX;
            previousY = currentY;

            const isSmall = smallToggle.checked;
            let nextX, nextY;

            if (isSmall) {
                nextX = currentX + (Math.random() * 20 - 10);
                nextY = currentY + (Math.random() * 20 - 10);

                if (isInHotCorner(nextX, nextY)) {
                    nextX = canvasWidth / 2;
                    nextY = canvasHeight / 2;
                    addLog('<span class="emoji">‚ö†Ô∏è</span> ÂÅµÊ∏¨Âà∞ Hot CornerÔºåÁßªÂãïÂà∞Ëû¢Âπï‰∏≠Â§Æ');
                }
            } else {
                nextX = BORDER_SIZE + Math.random() * (canvasWidth - 2 * BORDER_SIZE);
                nextY = BORDER_SIZE + Math.random() * (canvasHeight - 2 * BORDER_SIZE);
            }

            currentX = Math.max(BORDER_SIZE, Math.min(canvasWidth - BORDER_SIZE, nextX));
            currentY = Math.max(BORDER_SIZE, Math.min(canvasHeight - BORDER_SIZE, nextY));

            drawHotCorners();
            drawMouse(currentX, currentY, '#28a745', 'üê±');

            moveCount++;
            document.getElementById('moveCount').textContent = moveCount;
            document.getElementById('positionX').textContent = Math.round(currentX);
            document.getElementById('positionY').textContent = Math.round(currentY);

            addLog(`<span class="emoji">üò∫</span> Ëá™ÂãïÁßªÂãïÂà∞ <span class="position">(${Math.round(currentX)}, ${Math.round(currentY)})</span>`);
        }

        // ‰∏ªÂæ™Áí∞
        function mainLoop() {
            const curr = { x: currentX, y: currentY };
            const prev = { x: previousX, y: previousY };

            if (curr.x !== prev.x || curr.y !== prev.y) {
                if (!alwaysToggle.checked && userMoved) {
                    addLog('<span class="emoji">üëã</span> ÂÅµÊ∏¨Âà∞‰ΩøÁî®ËÄÖÁßªÂãïÔºåÂÅúÊ≠¢Âü∑Ë°å');
                    stopDemo();
                    return;
                }
                addLog(`<span class="emoji">üêÅ</span> ‰ΩçÁΩÆËÆäÊõ¥Âà∞ <span class="position">(${Math.round(curr.x)}, ${Math.round(curr.y)})</span>`);
                previousX = currentX;
                previousY = currentY;
                userMoved = false;
            } else {
                moveToNextLocation();
            }
        }

        // ÈñãÂßãÊºîÁ§∫
        function startDemo() {
            if (isRunning) return;

            isRunning = true;
            moveCount = 0;
            userMoved = false;
            startBtn.disabled = true;
            stopBtn.disabled = false;
            document.getElementById('statusDisplay').textContent = 'ÈÅãË°å‰∏≠';

            addLog('<span class="emoji">üöÄ</span> ÈñãÂßãÊºîÁ§∫');

            const interval = timeSlider.value * 1000;
            intervalId = setInterval(mainLoop, interval);
        }

        // ÂÅúÊ≠¢ÊºîÁ§∫
        function stopDemo() {
            if (!isRunning) return;

            isRunning = false;
            clearInterval(intervalId);
            startBtn.disabled = false;
            stopBtn.disabled = true;
            document.getElementById('statusDisplay').textContent = 'ÂÅúÊ≠¢';

            addLog('<span class="emoji">‚èπÔ∏è</span> ÂÅúÊ≠¢ÊºîÁ§∫');
        }

        // ÈáçÁΩÆ
        function resetDemo() {
            stopDemo();
            moveCount = 0;
            currentX = canvasWidth / 2;
            currentY = canvasHeight / 2;
            previousX = currentX;
            previousY = currentY;
            userMoved = false;

            document.getElementById('moveCount').textContent = '0';
            document.getElementById('positionX').textContent = Math.round(currentX);
            document.getElementById('positionY').textContent = Math.round(currentY);
            document.getElementById('logContainer').innerHTML = '<div class="log-entry"><span class="timestamp">[Á≥ªÁµ±]</span> Â∑≤ÈáçÁΩÆÔºåÊ∫ñÂÇôÂ∞±Á∑í</div>';

            drawHotCorners();
            drawMouse(currentX, currentY, '#6c757d', 'ÂàùÂßã');
        }

        // Canvas ÈªûÊìä‰∫ã‰ª∂ÔºàÊ®°Êì¨‰ΩøÁî®ËÄÖÁßªÂãïÊªëÈº†Ôºâ
        canvas.addEventListener('click', (e) => {
            const rect = canvas.getBoundingClientRect();
            currentX = e.clientX - rect.left;
            currentY = e.clientY - rect.top;
            userMoved = true;

            drawHotCorners();
            drawMouse(currentX, currentY, '#007bff', 'üëÜ');

            document.getElementById('positionX').textContent = Math.round(currentX);
            document.getElementById('positionY').textContent = Math.round(currentY);

            addLog(`<span class="emoji">üëÜ</span> ‰ΩøÁî®ËÄÖÈªûÊìä <span class="position">(${Math.round(currentX)}, ${Math.round(currentY)})</span>`);
        });

        // Ë§áË£ΩÂëΩ‰ª§
        function copyCommand() {
            const text = commandDisplay.textContent;
            navigator.clipboard.writeText(text).then(() => {
                const btn = event.target;
                btn.textContent = 'Â∑≤Ë§áË£Ω!';
                setTimeout(() => btn.textContent = 'Ë§áË£Ω', 2000);
            });
        }

        // ÊåâÈàï‰∫ã‰ª∂
        startBtn.addEventListener('click', startDemo);
        stopBtn.addEventListener('click', stopDemo);
        resetBtn.addEventListener('click', resetDemo);

        // ÂàùÂßãÂåñ
        stopBtn.disabled = true;
        drawHotCorners();
        drawMouse(currentX, currentY, '#6c757d', 'ÂàùÂßã');
        document.getElementById('positionX').textContent = Math.round(currentX);
        document.getElementById('positionY').textContent = Math.round(currentY);
    </script>
</body>
</html>
